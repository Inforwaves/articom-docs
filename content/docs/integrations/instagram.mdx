---
title: Instagram Integration
description: Automate Instagram Direct Messages with AI agents
---

## Overview

Connect Articom with Instagram to automate Direct Message responses and engage with your Instagram followers.

The Instagram integration enables you to:
- Respond to Instagram Direct Messages automatically
- Handle story mentions and replies
- Automate comment responses
- Manage multiple conversations
- Track engagement metrics

## Prerequisites

- Instagram Business or Creator account
- Facebook Page connected to Instagram account
- Facebook Developer app with Instagram API access
- Meta Business Manager account

## Setup

### Step 1: Connect Instagram to Facebook Page

1. Go to your Facebook Page settings
2. Navigate to Instagram section
3. Connect your Instagram Business account
4. Ensure account is linked properly

### Step 2: Get API Access

```javascript
const instagram = await articom.integrations.connect({
  type: "instagram",
  config: {
    instagramAccountId: "YOUR_IG_ACCOUNT_ID",
    pageAccessToken: "YOUR_PAGE_ACCESS_TOKEN",
    appSecret: "YOUR_APP_SECRET"
  }
});
```

### Step 3: Configure Webhook

```javascript
const webhook = await instagram.setupWebhook({
  url: "https://your-domain.com/webhooks/instagram",
  fields: [
    "messages",
    "messaging_postbacks",
    "message_reactions",
    "messaging_seen"
  ]
});
```

## Sending Messages

### Text Messages

```javascript
await instagram.sendMessage({
  recipient: { id: "USER_IG_SCOPED_ID" },
  message: {
    text: "Thanks for reaching out! How can I help you?"
  }
});
```

### Images

```javascript
await instagram.sendMessage({
  recipient: { id: "USER_IG_SCOPED_ID" },
  message: {
    attachment: {
      type: "image",
      payload: {
        url: "https://example.com/image.jpg"
      }
    }
  }
});
```

### Quick Replies

```javascript
await instagram.sendMessage({
  recipient: { id: "USER_IG_SCOPED_ID" },
  message: {
    text: "What interests you?",
    quick_replies: [
      {
        content_type: "text",
        title: "Products",
        payload: "VIEW_PRODUCTS"
      },
      {
        content_type: "text",
        title: "Support",
        payload: "GET_SUPPORT"
      },
      {
        content_type: "text",
        title: "Shop Now",
        payload: "SHOP_NOW"
      }
    ]
  }
});
```

### Generic Template

```javascript
await instagram.sendMessage({
  recipient: { id: "USER_IG_SCOPED_ID" },
  message: {
    attachment: {
      type: "template",
      payload: {
        template_type: "generic",
        elements: [
          {
            title: "New Collection",
            image_url: "https://example.com/collection.jpg",
            subtitle: "Check out our latest arrivals",
            buttons: [
              {
                type: "web_url",
                url: "https://example.com/shop",
                title: "Shop Now"
              },
              {
                type: "postback",
                title: "Learn More",
                payload: "LEARN_MORE"
              }
            ]
          }
        ]
      }
    }
  }
});
```

## Receiving Messages

### Handle Direct Messages

```javascript
instagram.onMessage(async (event) => {
  const senderId = event.sender.id;
  const message = event.message;

  console.log({
    from: senderId,
    text: message.text,
    timestamp: event.timestamp
  });

  // Process with AI agent
  const response = await agent.processMessage({
    text: message.text,
    userId: senderId,
    channel: "instagram",
    context: {
      platform: "instagram_dm"
    }
  });

  // Send response
  await instagram.sendMessage({
    recipient: { id: senderId },
    message: { text: response.text }
  });
});
```

### Handle Story Mentions

```javascript
instagram.onStoryMention(async (event) => {
  const userId = event.sender.id;
  const mediaId = event.message.attachments[0].payload.url;

  await instagram.sendMessage({
    recipient: { id: userId },
    message: {
      text: "Thanks for mentioning us in your story! ðŸŽ‰"
    }
  });
});
```

### Handle Story Replies

```javascript
instagram.onStoryReply(async (event) => {
  const userId = event.sender.id;
  const replyText = event.message.text;
  const storyId = event.message.reply_to.story.id;

  await instagram.sendMessage({
    recipient: { id: userId },
    message: {
      text: `Thanks for your reply: "${replyText}"!`
    }
  });
});
```

### Handle Media Shares

```javascript
instagram.onMediaShare(async (event) => {
  const userId = event.sender.id;
  const mediaUrl = event.message.attachments[0].payload.url;

  await instagram.sendMessage({
    recipient: { id: userId },
    message: {
      text: "Thanks for sharing! We love seeing this."
    }
  });
});
```

## Comment Management

### Monitor Comments

```javascript
instagram.onComment(async (comment) => {
  console.log({
    postId: comment.media.id,
    commentId: comment.id,
    text: comment.text,
    user: comment.from.username
  });

  // Auto-reply to comments
  if (shouldAutoReply(comment.text)) {
    await instagram.replyToComment({
      commentId: comment.id,
      message: "Thanks for your comment! Check your DMs ðŸ“©"
    });

    // Send DM
    await instagram.sendMessage({
      recipient: { id: comment.from.id },
      message: {
        text: "Hi! Thanks for your interest. How can we help?"
      }
    });
  }
});
```

### Hide/Delete Comments

```javascript
// Hide comment
await instagram.hideComment({
  commentId: "COMMENT_ID"
});

// Delete comment
await instagram.deleteComment({
  commentId: "COMMENT_ID"
});
```

## Advanced Features

### Ice Breakers (Quick Questions)

```javascript
await instagram.setIceBreakers({
  ice_breakers: [
    {
      question: "What are your hours?",
      payload: "BUSINESS_HOURS"
    },
    {
      question: "How can I order?",
      payload: "HOW_TO_ORDER"
    },
    {
      question: "Do you ship internationally?",
      payload: "SHIPPING_INFO"
    }
  ]
});
```

### Persistent Menu

```javascript
await instagram.setPersistentMenu({
  persistent_menu: [
    {
      locale: "default",
      call_to_actions: [
        {
          type: "postback",
          title: "Shop Now",
          payload: "SHOP_NOW"
        },
        {
          type: "web_url",
          title: "Visit Website",
          url: "https://example.com"
        },
        {
          type: "postback",
          title: "Contact Support",
          payload: "SUPPORT"
        }
      ]
    }
  ]
});
```

### Typing Indicators

```javascript
// Show typing
await instagram.sendAction({
  recipient: { id: "USER_ID" },
  sender_action: "typing_on"
});

// Hide typing
await instagram.sendAction({
  recipient: { id: "USER_ID" },
  sender_action: "typing_off"
});
```

### Mark as Seen

```javascript
await instagram.sendAction({
  recipient: { id: "USER_ID" },
  sender_action: "mark_seen"
});
```

## User Information

### Get User Profile

```javascript
const profile = await instagram.getUserProfile({
  userId: "USER_IG_SCOPED_ID",
  fields: ["name", "username", "profile_pic"]
});

console.log({
  name: profile.name,
  username: profile.username,
  profilePic: profile.profile_pic
});
```

## Agent Integration

### Connect Agent to Instagram

```javascript
const agent = await articom.agents.get("agent_123");

await agent.addChannel({
  type: "instagram",
  config: {
    instagramAccountId: "YOUR_IG_ACCOUNT_ID",
    autoRespond: true,
    respondToComments: true,
    respondToStoryMentions: true,
    features: {
      iceBreakers: true,
      quickReplies: true,
      typingIndicator: true
    }
  }
});
```

### Auto-response Configuration

```javascript
agent.setInstagramConfig({
  dmAutoReply: {
    enabled: true,
    message: "Hey! Thanks for your message. How can I help you today?"
  },
  commentAutoReply: {
    enabled: true,
    keywords: ["price", "order", "shipping", "help"],
    action: "send_dm"
  },
  storyReplyMessage: {
    enabled: true,
    message: "Thanks for your reply! ðŸ’œ"
  }
});
```

## Analytics

```javascript
const analytics = await instagram.getAnalytics({
  period: "last_30_days",
  metrics: [
    "messages_sent",
    "messages_received",
    "story_mentions",
    "comments_replied",
    "response_time"
  ]
});

console.log({
  dmReceived: analytics.messagesReceived,
  storyMentions: analytics.storyMentions,
  avgResponseTime: analytics.avgResponseTime,
  engagementRate: analytics.engagementRate
});
```

## Conversation Management

### Get Conversations

```javascript
const conversations = await instagram.getConversations({
  folder: "inbox", // or "primary", "general", "done"
  limit: 20
});
```

### Update Conversation

```javascript
// Move to folder
await instagram.updateConversation({
  conversationId: "CONVERSATION_ID",
  folder: "done"
});

// Add label
await instagram.addLabel({
  conversationId: "CONVERSATION_ID",
  label: "vip_customer"
});
```

## Best Practices

### 1. Authentic Voice
Maintain your brand's Instagram voice in automated responses.

### 2. Visual Content
Use images and rich media to enhance engagement.

### 3. Quick Response
Respond to DMs within 5 minutes for best engagement.

### 4. Story Engagement
Actively respond to story mentions and replies.

### 5. Comment Moderation
Monitor and respond to comments promptly.

## Instagram Limits

- **Messages per hour**: Rate limited per account
- **Story mentions**: Must respond within 24 hours
- **Comments**: Must be business or creator account
- **Media sharing**: Limited to supported formats

## Compliance

### Instagram Policies
- Follow Instagram Community Guidelines
- Comply with Platform Terms
- Respect user privacy
- Don't spam or send unsolicited messages

### Data Protection

```javascript
// Handle data deletion
await instagram.deleteUserData({
  userId: "USER_ID",
  reason: "user_request"
});
```

## Troubleshooting

### Common Issues

**Can't Send Messages**
- Verify Instagram account is Business or Creator
- Check Facebook Page is properly linked
- Ensure user hasn't blocked account

**Webhook Not Working**
- Verify webhook subscription
- Check Instagram permissions
- Ensure HTTPS endpoint

**Story Replies Not Received**
- Verify account type (Business/Creator)
- Check webhook subscriptions
- Ensure proper permissions

## Support

- **Instagram API Docs**: https://developers.facebook.com/docs/instagram-api
- **Articom Support**: support@articom.io
- **Community**: community.articom.io

## Next Steps

<Cards>
  <Card title="WhatsApp" href="/docs/integrations/whatsapp" />
  <Card title="Messenger" href="/docs/integrations/messenger" />
  <Card title="Slack" href="/docs/integrations/slack" />
</Cards>
